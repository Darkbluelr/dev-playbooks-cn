# DevBooks MCP å¢å¼ºæç¤ºè¯

æœ¬æ–‡æ¡£æä¾›å„ MCP Server çš„å¢å¼ºæç¤ºè¯ç‰‡æ®µï¼Œå¯è¿½åŠ åˆ°åŸºç¡€æç¤ºè¯ä¸­ä½¿ç”¨ã€‚

> **åŸºç¡€ç‰ˆæœ¬**ï¼šæ—  MCP æ—¶è¯·å‚è€ƒ `åŸºç¡€æç¤ºè¯.md`
> **å®Œå…¨ä½“ç‰ˆæœ¬**ï¼šå®‰è£…æ‰€æœ‰ MCP åï¼Œè¯·å‚è€ƒ `å®Œå…¨ä½“æç¤ºè¯.md`

---

## Code-Intelligence MCP å¢å¼ºæç¤ºè¯

> **å‰ç½®æ¡ä»¶**ï¼šå·²å®‰è£… code-intelligence-mcp
> **æ³¨æ„**ï¼šcode-intelligence-mcp æ— éœ€ CKB å³å¯ç‹¬ç«‹ä½¿ç”¨ï¼ŒCKB æ˜¯å¯é€‰å¢å¼º

### æ™ºèƒ½ä¸Šä¸‹æ–‡æœç´¢ï¼ˆImpact Analysis / Coder å¢å¼ºï¼‰

åœ¨ Impact Analysis æˆ– Coder æç¤ºè¯ä¸­è¿½åŠ ï¼š

```
**æ™ºèƒ½ä¸Šä¸‹æ–‡æœç´¢**ï¼š
å¼€å§‹å‰è¯·ä½¿ç”¨ code-intelligence-mcp å·¥å…·è·å–ç›¸å…³ä¸Šä¸‹æ–‡ï¼š
- `ci_search(query, top_k=10)` - è¯­ä¹‰æœç´¢ç›¸å…³ä»£ç ç‰‡æ®µ
- `ci_graph_rag(query, max_depth=2)` - Graph-RAG ä¸Šä¸‹æ–‡æ£€ç´¢
- `ci_index_status()` - æ£€æŸ¥ç´¢å¼•çŠ¶æ€

ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰æœç´¢ç»“æœï¼Œè‹¥æ— ç´¢å¼•åˆ™è‡ªåŠ¨é™çº§ä¸ºå…³é”®è¯æœç´¢ã€‚
```

### è°ƒç”¨é“¾è¿½è¸ªï¼ˆImpact Analysis å¢å¼ºï¼‰

åœ¨ Impact Analysis æç¤ºè¯ä¸­è¿½åŠ ï¼š

```
**è°ƒç”¨é“¾è¿½è¸ª**ï¼š
åˆ†æå½±å“èŒƒå›´æ—¶ï¼Œä½¿ç”¨è°ƒç”¨é“¾å·¥å…·ï¼š
- `ci_call_chain(symbol, direction="both", depth=2)` - è·å–è°ƒç”¨è€…/è¢«è°ƒç”¨è€…
- æ–¹å‘é€‰é¡¹ï¼šcallersï¼ˆè°è°ƒç”¨äº†å®ƒï¼‰ã€calleesï¼ˆå®ƒè°ƒç”¨äº†è°ï¼‰ã€bothï¼ˆåŒå‘ï¼‰

è¾“å‡ºæ ¼å¼ï¼š
1. ç›´æ¥å½±å“å±‚ï¼ˆdepth=1ï¼‰
2. é—´æ¥å½±å“å±‚ï¼ˆdepth=2ï¼‰
3. å¾ªç¯ä¾èµ–è­¦å‘Šï¼ˆå¦‚æœ‰ï¼‰
```

### Bug å®šä½ï¼ˆDebug åœºæ™¯å¢å¼ºï¼‰

åœ¨è°ƒè¯•åœºæ™¯ä¸­ä½¿ç”¨ï¼š

```
**Bug å®šä½**ï¼š
é‡åˆ°é”™è¯¯æ—¶ï¼Œä½¿ç”¨ Bug å®šä½å·¥å…·ï¼š
- `ci_bug_locate(error_message, stack_trace)` - æ ¹æ®é”™è¯¯ä¿¡æ¯å®šä½å¯èƒ½çš„æºå¤´
- `ci_complexity(file_path)` - æ£€æŸ¥æ–‡ä»¶å¤æ‚åº¦ï¼Œé«˜å¤æ‚åº¦åŒºåŸŸæ›´æ˜“å‡ºé”™

åˆ†ææµç¨‹ï¼š
1. è§£æé”™è¯¯å †æ ˆ
2. å®šä½ç›¸å…³æ–‡ä»¶å’Œå‡½æ•°
3. æ£€æŸ¥é«˜å¤æ‚åº¦åŒºåŸŸ
4. è¿½æº¯è°ƒç”¨é“¾æ‰¾æ ¹å› 
```

---

## CKB MCP å¢å¼ºæç¤ºè¯

> **å‰ç½®æ¡ä»¶**ï¼šå·²å®‰è£… CKB MCP Server

### çƒ­ç‚¹æ„ŸçŸ¥æç¤ºè¯ï¼ˆCoder å¢å¼ºï¼‰

åœ¨ Coder æç¤ºè¯ä¸­è¿½åŠ ï¼š

```
**çƒ­ç‚¹æ„ŸçŸ¥**ï¼š
å¼€å§‹å‰è¯·è°ƒç”¨ `mcp__ckb__getHotspots(limit=20)` è·å–é¡¹ç›®çƒ­ç‚¹åˆ—è¡¨ã€‚
å¯¹æ¯” tasks.md ä¸­æ¶‰åŠçš„æ–‡ä»¶ä¸çƒ­ç‚¹åˆ—è¡¨ï¼š
- ğŸ”´ Criticalï¼ˆTop 5 çƒ­ç‚¹ï¼‰ï¼šå…ˆé‡æ„å†ä¿®æ”¹ï¼Œå¿…é¡»å¢åŠ æµ‹è¯•
- ğŸŸ¡ Highï¼ˆTop 10 çƒ­ç‚¹ï¼‰ï¼šå¢åŠ æµ‹è¯•è¦†ç›–ï¼Œä»£ç å®¡æŸ¥é‡ç‚¹å…³æ³¨
- ğŸŸ¢ Normalï¼ˆéçƒ­ç‚¹ï¼‰ï¼šæ­£å¸¸æµç¨‹

åœ¨å¼€å§‹ç¼–ç å‰è¾“å‡ºçƒ­ç‚¹æ£€æŸ¥æŠ¥å‘Šã€‚
```

### çƒ­ç‚¹ä¼˜å…ˆå®¡æŸ¥æç¤ºè¯ï¼ˆReviewer å¢å¼ºï¼‰

åœ¨ Reviewer æç¤ºè¯ä¸­è¿½åŠ ï¼š

```
**çƒ­ç‚¹ä¼˜å…ˆå®¡æŸ¥**ï¼š
å®¡æŸ¥å‰è¯·è°ƒç”¨ `mcp__ckb__getHotspots(limit=20)` è·å–é¡¹ç›®çƒ­ç‚¹ã€‚
æŒ‰é£é™©æ’åºå®¡æŸ¥ï¼š
- ğŸ”´ çƒ­ç‚¹ Top 5ï¼šå¿…é¡»æ·±åº¦å®¡æŸ¥
- ğŸŸ¡ çƒ­ç‚¹ Top 10ï¼šé‡ç‚¹å…³æ³¨
- ğŸŸ¢ éçƒ­ç‚¹ï¼šå¸¸è§„å®¡æŸ¥

çƒ­ç‚¹æ–‡ä»¶é¢å¤–æ£€æŸ¥ï¼šæµ‹è¯•è¦†ç›–ç‡ã€åœˆå¤æ‚åº¦å˜åŒ–ã€ä¾èµ–æ•°é‡å˜åŒ–ã€å˜æ›´èŒƒå›´ã€‚
```

### å›¾åŸºå½±å“åˆ†ææç¤ºè¯ï¼ˆImpact Analysis å¢å¼ºï¼‰

åœ¨ Impact Analysis æç¤ºè¯ä¸­è¿½åŠ ï¼š

```
**å›¾åŸºåˆ†æ**ï¼š
1. è°ƒç”¨ `mcp__ckb__getStatus` æ£€æŸ¥ç´¢å¼•çŠ¶æ€
2. è‹¥ç´¢å¼•å¯ç”¨ï¼Œä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œé«˜ç²¾åº¦åˆ†æï¼š
   - `mcp__ckb__searchSymbols(query)` - æŸ¥æ‰¾ç›®æ ‡ç¬¦å·
   - `mcp__ckb__analyzeImpact(symbolId, depth=2)` - å½±å“èŒƒå›´è¯„ä¼°
   - `mcp__ckb__findReferences(symbolId)` - ç›´æ¥å¼•ç”¨ç‚¹
   - `mcp__ckb__getCallGraph(symbolId, direction="callers", depth=2)` - è°ƒç”¨è€…é“¾
   - `mcp__ckb__getHotspots(limit=20)` - çƒ­ç‚¹å åŠ åˆ†æ
3. è‹¥ç´¢å¼•ä¸å¯ç”¨ï¼Œé™çº§ä¸ºæ–‡æœ¬æœç´¢ï¼ˆGrep + Globï¼‰
```

### Index Bootstrapperï¼ˆæ¿€æ´»å›¾åŸºä»£ç ç†è§£èƒ½åŠ›æ—¶ï¼‰

```
è¯·ç‚¹åä½¿ç”¨ `devbooks-index-bootstrap`ã€‚
ç›®æ ‡ï¼šæ£€æµ‹é¡¹ç›®è¯­è¨€æ ˆï¼Œç”Ÿæˆ SCIP ç´¢å¼•ï¼Œæ¿€æ´»å›¾åŸºä»£ç ç†è§£èƒ½åŠ›ï¼ˆå½±å“åˆ†æã€è°ƒç”¨å›¾ã€çƒ­ç‚¹æ£€æµ‹ç­‰ï¼‰ã€‚
å‰æï¼šCKB MCP å·²é…ç½®ä½† `mcp__ckb__getStatus` æ˜¾ç¤º SCIP åç«¯ä¸å¯ç”¨ã€‚
```

---

## Code-Intelligence + CKB è”åˆå¢å¼º

> **å‰ç½®æ¡ä»¶**ï¼šåŒæ—¶å®‰è£… code-intelligence-mcp å’Œ CKB MCP Server

åœ¨éœ€è¦æ·±åº¦ä»£ç åˆ†æçš„åœºæ™¯ï¼ˆImpact Analysisã€Coderã€Reviewerï¼‰ä¸­è¿½åŠ ï¼š

```
**è”åˆå¢å¼ºæ¨¡å¼**ï¼š
1. å…ˆç”¨ `ci_index_status()` æ£€æŸ¥ code-intelligence ç´¢å¼•
2. å†ç”¨ `mcp__ckb__getStatus` æ£€æŸ¥ CKB SCIP ç´¢å¼•
3. æ ¹æ®å¯ç”¨æ€§é€‰æ‹©æœ€ä½³å·¥å…·ï¼š
   - CKB å¯ç”¨ï¼šä¼˜å…ˆä½¿ç”¨ `mcp__ckb__*` ç³»åˆ—ï¼ˆç²¾ç¡®ç¬¦å·åˆ†æï¼‰
   - ä»… CI å¯ç”¨ï¼šä½¿ç”¨ `ci_*` ç³»åˆ—ï¼ˆè¯­ä¹‰æœç´¢ + import è§£æï¼‰
   - ä¸¤è€…éƒ½å¯ç”¨ï¼šCKB åšç²¾ç¡®åˆ†æï¼ŒCI åšè¯­ä¹‰è¡¥å……
```

---

## MCP å®‰è£…æŒ‡å¼•

| MCP Server | å®‰è£…æ–¹å¼ | é…ç½®æ–‡æ¡£ |
|------------|----------|----------|
| CKB MCP | å‚è€ƒ `mcp/mcp-servers.md` | Claude/Codex é…ç½®ç¤ºä¾‹ |
| code-intelligence-mcp | `npm install -g code-intelligence-mcp` | ç‹¬ç«‹ä»“åº“ README |

è¯¦ç»†é…ç½®è¯·å‚è€ƒï¼š
- `mcp/mcp-servers.md` - MCP Server æ€»è§ˆ
- `mcp/mcp_claude.md` - Claude Code é…ç½®
- `mcp/mcp_codex.md` - Codex CLI é…ç½®
