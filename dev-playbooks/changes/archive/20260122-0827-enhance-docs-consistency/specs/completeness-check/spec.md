# 规格：完备性检查

## ADDED Requirements

### Requirement: REQ-COMP-001 多维度完备性检查

**描述**: 检查文档完备性,覆盖环境依赖、安全权限、故障排查、配置说明、API 文档等维度。

**理由**: 当前检查维度不足,遗漏关键信息导致用户无法正确使用工具。

**优先级**: P0

**关联 AC**: AC-004

**依赖**: 无

**约束**:
- 必须覆盖 5 个维度
- 每个维度有明确的检查规则
- 只警告,不阻塞归档
- 输出报告到 `evidence/completeness-report.md`


#### Scenario: SC-COMP-001-AUTO 多维度完备性检查 最小场景

- **Given**: 需求 COMP-001 已实现
- **When**: 执行对应功能
- **Then**: 输出符合需求描述

**证据**: tests/20260122-0827-enhance-docs-consistency 或 evidence/ 对应日志
### Requirement: REQ-COMP-002 完备性维度可配置

**描述**: 完备性检查维度可通过配置文件扩展。

**理由**: 不同项目可能需要检查不同的维度。

**优先级**: P1

**关联 AC**: AC-004

**依赖**: REQ-COMP-001

**约束**:
- 提供默认维度配置
- 支持自定义维度
- 维度配置格式清晰


#### Scenario: SC-COMP-001 检查环境依赖维度

**关联需求**: REQ-COMP-001

**Given**:
- README.md 文档存在
- 文档未说明 Node.js 版本要求

**When**:
- 运行完备性检查

**Then**:
- 检测到缺失环境依赖说明
- 输出警告: "缺少环境依赖说明(如 Node.js 版本)"
- 记录到完备性报告

**验收标准**:
- 正确检测缺失项
- 警告信息清晰
- 报告格式正确

#### Scenario: SC-COMP-002 检查安全权限维度

**关联需求**: REQ-COMP-001

**Given**:
- 工具需要文件系统写权限
- 文档未说明权限要求

**When**:
- 运行完备性检查

**Then**:
- 检测到缺失安全权限说明
- 输出警告: "缺少安全权限说明(如文件系统权限)"
- 记录到完备性报告

**验收标准**:
- 正确检测缺失项
- 警告信息清晰
- 报告格式正确

#### Scenario: SC-COMP-003 检查故障排查维度

**关联需求**: REQ-COMP-001

**Given**:
- 文档存在
- 文档未包含故障排查指南

**When**:
- 运行完备性检查

**Then**:
- 检测到缺失故障排查指南
- 输出警告: "缺少故障排查指南"
- 记录到完备性报告

**验收标准**:
- 正确检测缺失项
- 警告信息清晰
- 报告格式正确

#### Scenario: SC-COMP-004 检查配置说明维度

**关联需求**: REQ-COMP-001

**Given**:
- 工具支持配置文件
- 文档未说明配置项含义

**When**:
- 运行完备性检查

**Then**:
- 检测到缺失配置说明
- 输出警告: "缺少配置说明"
- 记录到完备性报告

**验收标准**:
- 正确检测缺失项
- 警告信息清晰
- 报告格式正确

#### Scenario: SC-COMP-005 检查 API 文档维度

**关联需求**: REQ-COMP-001

**Given**:
- 代码导出公共 API
- 文档未说明 API 用法

**When**:
- 运行完备性检查

**Then**:
- 检测到缺失 API 文档
- 输出警告: "缺少 API 文档"
- 记录到完备性报告

**验收标准**:
- 正确检测缺失项
- 警告信息清晰
- 报告格式正确

#### Scenario: SC-COMP-006 生成完备性报告

**关联需求**: REQ-COMP-001

**Given**:
- 完成所有维度检查
- 发现 3 个缺失项

**When**:
- 生成完备性报告

**Then**:
- 报告包含所有维度检查结果
- 每个维度标注 ✓ 或 ✗
- 缺失项有详细说明
- 报告保存到 `evidence/completeness-report.md`

**验收标准**:
- 报告格式正确
- 所有维度都有结果
- 缺失项说明清晰
- 文件路径正确

#### Scenario: SC-COMP-007 自定义完备性维度

**关联需求**: REQ-COMP-002

**Given**:
- 用户在 `completeness-dimensions.yaml` 中添加新维度: "性能指标"
- 文档未包含性能指标说明

**When**:
- 运行完备性检查

**Then**:
- 检查包含自定义维度
- 检测到缺失性能指标说明
- 输出警告并记录到报告

**验收标准**:
- 自定义维度正确加载
- 检查逻辑正确执行
- 报告包含自定义维度结果

#### Scenario: SC-COMP-008 完备性检查不阻塞归档

**关联需求**: REQ-COMP-001

**Given**:
- 完备性检查发现 5 个缺失项
- 用户运行归档流程

**When**:
- 归档流程调用完备性检查

**Then**:
- 输出警告信息
- 生成完备性报告
- 归档流程继续执行(不阻塞)

**验收标准**:
- 警告正确显示
- 报告正确生成
- 归档流程不中断
