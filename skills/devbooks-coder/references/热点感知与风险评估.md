# 热点感知与风险评估

## MCP 增强

本 Skill 支持 MCP 运行时增强，自动检测并启用高级功能。

MCP 增强规则参考：`~/.claude/skills/_shared/MCP增强模板.md`

## 依赖的 MCP 服务

| 服务 | 用途 | 超时 |
|------|------|------|
| `mcp__ckb__getHotspots` | 检测热点文件，输出预警 | 2s |
| `mcp__ckb__getStatus` | 检测 CKB 索引可用性 | 2s |

## 检测流程

1. 调用 `mcp__ckb__getStatus`（2s 超时）
2. 若 CKB 可用 → 调用 `mcp__ckb__getHotspots` 获取热点文件
3. 若超时或失败 → 降级到基础模式（无热点预警）

## 增强模式 vs 基础模式

| 功能 | 增强模式 | 基础模式 |
|------|----------|----------|
| 热点文件预警 | CKB 实时分析 | 不可用 |
| 风险文件识别 | 自动高亮高热点变更 | 手动识别 |
| 代码导航 | 符号级跳转 | 文件级搜索 |

## 降级提示

当 MCP 不可用时，输出以下提示：

```
⚠️ CKB 不可用，跳过热点检测。
如需启用热点预警，请手动生成 SCIP 索引。
```
