# glossary.md 模板（真理源元信息）

> 推荐路径：`<truth-root>/_meta/glossary.md`
>
> 目标：统一业务语言，避免同义不同名导致的规格与代码漂移。

---
owner: `<role/agent>`
last_verified: `YYYY-MM-DD`
status: `Active | Deprecated | Draft`
freshness_check: `3 Months`
---

## 术语表（Ubiquitous Language）

| 术语（中文） | 术语（英文） | 代码名/实体 | 定义（业务含义） | 同义词（允许） | 禁用词（避免） | 备注/例子 |
|---|---|---|---|---|---|---|
| 订单 | Order | Order | 用户完成支付后生成的交易记录 | 订单单 | Deal/Trade | 示例：订单号、订单状态 |
| 客户 | Customer | Customer | 与平台发生交易的自然人/企业 | 用户 | Account | 示例：客户等级、客户画像 |

## 领域建模术语（Domain Modeling Terms）

> 以下术语用于 `design.md` 的领域模型章节，帮助区分不同类型的对象。

| 术语 | 定义 | 识别标准 | 示例 |
|------|------|----------|------|
| **Entity（实体）** | 有唯一标识、可变状态、需要跟踪生命周期的对象 | ① 有业务意义的 ID ② 状态可变 ③ 需要持久化 | Order、Customer、Product |
| **Value Object（值对象）** | 无唯一标识、不可变、描述性的对象 | ① 无 ID ② 不可变 ③ 可自由复制/共享 | Address、Money、DateRange、Email |
| **Invariant（固定规则）** | 必须始终成立的业务约束，任何操作都不能破坏 | ① 跨属性约束 ② 违反即数据错误 | `订单总额 = SUM(明细金额)`、`库存 >= 0` |
| **Business Rule（业务规则）** | 可配置/可变的业务策略，违反时有明确的处理逻辑 | ① 可能随业务调整 ② 违反有处理路径 | `会员折扣率`、`超时自动取消` |
| **ACL（Anti-Corruption Layer）** | 隔离外部系统模型与内部模型的适配层 | ① 外部 API 调用入口 ② 模型转换逻辑 | 支付网关适配器、第三方物流接口 |
| **Bounded Context（限界上下文）** | 自治的业务领域边界，内部使用统一术语 | ① 独立部署/演进 ② 术语边界清晰 | 订单上下文、商品上下文、用户上下文 |

## 使用规则

- 设计/规格/测试/代码必须使用此表中的术语；禁止自创新词
- 若需要新增术语，先更新本文件，再产出 design/spec/tests
- **Entity vs Value Object 判断**：
  - 问"这个对象需要唯一标识吗？" → 是则 Entity，否则 Value Object
  - 问"这个对象的状态会变化吗？" → 是则 Entity，否则 Value Object
  - 问"两个对象所有属性相同时是否等价？" → 是则 Value Object，否则 Entity
- **Invariant 标注**：在 `design.md` 中以 `[Invariant]` 前缀标注，在代码中应有对应断言
